---
title: è®¾è®¡æ¨¡å¼
abbrlink: 364ea8cc
date: 2023-10-11 14:53:59
tags:
  - java
  - designPattern
categories: è½¯ä»¶è®¾è®¡ä¸æ¶æ„
description: ğŸ˜€
top_img: "linear-gradient(35deg, rgba(0, 128, 0, 0.6), rgba(255, 255, 0, 0.6), rgba(0, 0, 255, 0.6), rgba(255, 0, 0, 0.6), rgba(128, 0, 128, 0.6))"
---

# è®¾è®¡æ¨¡å¼

## ç­–ç•¥æ¨¡å¼

### **ä»‹ç»**

å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œå°†æ¯ä¸€ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œå¹¶è®©å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼è®©ç®—æ³•å¯ä»¥ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·å˜åŒ–ã€‚

### **ç»“æ„**

![image-20230526150814561](https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230526150814561.png)

### **è§’è‰²**

- Contextï¼ˆç¯å¢ƒç±»ï¼‰
- Strategyï¼ˆæŠ½è±¡ç­–ç•¥ç±»ï¼‰
- Concrete Strategyï¼ˆå…·ä½“ç­–ç•¥ç±»ï¼‰

### **å®ç°**

```java
//æŠ½è±¡ç­–ç•¥ç±»ä»£ç 
public abstract class Strategy {
    public abstract void algorithm();  //å£°æ˜æŠ½è±¡ç®—æ³•
}
```

```java
//å…·ä½“ç­–ç•¥ç±»ä»£ç 
public class ConcreteStrategyA extends Strategy {
    //ç®—æ³•çš„å…·ä½“å®ç°
    public void algorithm() {
        //ç®—æ³•A
    }
}
```

```java
//ç¯å¢ƒç±»ä»£ç 
public class Context {
    private Strategy strategy; //ç»´æŒä¸€ä¸ªå¯¹æŠ½è±¡ç­–ç•¥ç±»çš„å¼•ç”¨
    //æ³¨å…¥ç­–ç•¥å¯¹è±¡
    public void setStrategy(Strategy strategy) {
        this.strategy= strategy;
    }

    //è°ƒç”¨ç­–ç•¥ç±»ä¸­çš„ç®—æ³•
    public void algorithm() {
        strategy.algorithm();
    }
}
```

```java
//å®¢æˆ·ç«¯ä»£ç ç‰‡æ®µ
â€¦â€¦
Context context = new Context();
Strategy strategy;
strategy = new ConcreteStrategyA(); //å¯åœ¨è¿è¡Œæ—¶æŒ‡å®šç±»å‹ï¼Œé€šè¿‡é…ç½®æ–‡ä»¶å’Œåå°„æœºåˆ¶å®ç°
context.setStrategy(strategy);
context.algorithm();
â€¦â€¦

```

## è£…é¥°å™¨æ¨¡å¼

### ä»‹ç»

åœ¨ä¸æ”¹å˜ä¸€ä¸ªå¯¹è±¡æœ¬èº«åŠŸèƒ½çš„åŸºç¡€ä¸Šç»™å¯¹è±¡å¢åŠ é¢å¤–çš„æ–°è¡Œä¸ºï¼Œå¼•å…¥äº†è£…é¥°ç±»ï¼Œåœ¨è£…é¥°ç±»ä¸­æ—¢å¯ä»¥è°ƒç”¨å¾…è£…é¥°çš„åŸæœ‰ç±»çš„æ–¹æ³•ï¼Œè¿˜å¯ä»¥å¢åŠ æ–°çš„æ–¹æ³•ï¼Œä»¥æ‰©å±•åŸæœ‰ç±»çš„åŠŸèƒ½

### **ç»“æ„**

![image-20230526161910156](https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230526161910156.png)

### **è§’è‰²**

- Componentï¼ˆæŠ½è±¡æ„ä»¶ï¼‰

- Concrete Componentï¼ˆå…·ä½“æ„ä»¶ï¼‰

- Decoratorï¼ˆæŠ½è±¡è£…é¥°ç±»ï¼‰

- Concrete Decoratorï¼ˆå…·ä½“è£…é¥°ç±»ï¼‰

### **å®ç°**

```java
//	æŠ½è±¡æ„ä»¶
public abstract class Component {
	public abstract void display();
}
```

```java
//  å…·ä½“æ„ä»¶
public class ListBox extends Component {
    public void display() {
        System.out.println("æ˜¾ç¤ºåˆ—è¡¨æ¡†ï¼");
    }
}

--------------------------------------------------------------------------

//  å…·ä½“æ„ä»¶
public class TextBox extends Component {
	public void display() {
		System.out.println("æ˜¾ç¤ºæ–‡æœ¬æ¡†ï¼");
	}
}
```

```java
//	æŠ½è±¡è£…é¥°ç±»
public class ComponentDecorator extends Component {
    //ç»´æŒå¯¹æŠ½è±¡æ„ä»¶ç±»å‹å¯¹è±¡çš„å¼•ç”¨
	private Component component;

	//æ³¨å…¥æŠ½è±¡æ„ä»¶ç±»å‹çš„å¯¹è±¡
	public ComponentDecorator(Component component) {
		this.component = component;
	}

	public void display() {
		component.display();
	}
}
```

```java
//	å…·ä½“è£…é¥°ç±»
public class BlackBorderDecorator extends ComponentDecorator {
	public BlackBorderDecorator(Component component) {
		super(component);
	}

	public void display() {
		this.setBlackBorder();
		super.display();
	}

	public void setBlackBorder() {
		System.out.println("ä¸ºæ„ä»¶å¢åŠ é»‘è‰²è¾¹æ¡†ï¼");
	}
}
```

## è§‚å¯Ÿè€…æ¨¡å¼

### ä»‹ç»

å®šä¹‰å¯¹è±¡ä¹‹é—´çš„ä¸€ç§ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œä½¿å¾—æ¯å½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå…¶ç›¸å…³ä¾èµ–å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚

### **ç»“æ„**

![image-20230528120615051](https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230528120615051.png)

### è§’è‰²

- Subjectï¼ˆç›®æ ‡ï¼‰
- Concrete Subjectï¼ˆå…·ä½“ç›®æ ‡ï¼‰
- Observerï¼ˆè§‚å¯Ÿè€…ï¼‰
- Concrete Observerï¼ˆå…·ä½“è§‚å¯Ÿè€…ï¼‰

### å®ç°

```java
//æˆ˜é˜Ÿæ§åˆ¶ä¸­å¿ƒç±»ï¼šæŠ½è±¡ç›®æ ‡ç±»
public abstract class AllyControlCenter {
	protected String allyName; //æˆ˜é˜Ÿåç§°
	protected ArrayList<Observer> players = new ArrayList<Observer>(); //å®šä¹‰ä¸€ä¸ªé›†åˆç”¨äºå­˜å‚¨æˆ˜é˜Ÿæˆå‘˜

	public void setAllyName(String allyName) {
		this.allyName = allyName;
	}

	public String getAllyName() {
		return this.allyName;
	}

	//æ³¨å†Œæ–¹æ³•
	public void join(Observer obs) {
		System.out.println(obs.getName() + "åŠ å…¥" + this.allyName + "æˆ˜é˜Ÿï¼");
		players.add(obs);
	}

	//æ³¨é”€æ–¹æ³•
	public void quit(Observer obs) {
		System.out.println(obs.getName() + "é€€å‡º" + this.allyName + "æˆ˜é˜Ÿï¼");
		players.remove(obs);
	}

	//å£°æ˜æŠ½è±¡é€šçŸ¥æ–¹æ³•
	public abstract void notifyObserver(String name);
}
```

```java
//å…·ä½“æˆ˜é˜Ÿæ§åˆ¶ä¸­å¿ƒç±»ï¼šå…·ä½“ç›®æ ‡ç±»
public class ConcreteAllyControlCenter extends AllyControlCenter {
	public ConcreteAllyControlCenter(String allyName) {
		System.out.println(allyName + "æˆ˜é˜Ÿç»„å»ºæˆåŠŸï¼");
		System.out.println("----------------------------");
		this.allyName = allyName;
	}

	//å®ç°é€šçŸ¥æ–¹æ³•
	public void notifyObserver(String name) {
		System.out.println(this.allyName + "æˆ˜é˜Ÿç´§æ€¥é€šçŸ¥ï¼Œç›Ÿå‹" + name + "é­å—æ•Œäººæ”»å‡»ï¼");
		//éå†è§‚å¯Ÿè€…é›†åˆï¼Œè°ƒç”¨æ¯ä¸€ä¸ªç›Ÿå‹ï¼ˆè‡ªå·±é™¤å¤–ï¼‰çš„æ”¯æ´æ–¹æ³•
		for(Object obs : players) {
			if (!((Observer)obs).getName().equalsIgnoreCase(name)) {
				((Observer)obs).help();
			}
		}
	}
}
```

```java
//æŠ½è±¡è§‚å¯Ÿç±»
public interface Observer {
	public String getName();
	public void setName(String name);
	public void help(); //å£°æ˜æ”¯æ´ç›Ÿå‹æ–¹æ³•(å“åº”æ–¹æ³•)
	public void beAttacked(AllyControlCenter acc); //å£°æ˜é­å—æ”»å‡»æ–¹æ³•
}
```

```java
//æˆ˜é˜Ÿæˆå‘˜ç±»ï¼šå…·ä½“è§‚å¯Ÿè€…ç±»
public class Player implements Observer {
	private String name;

	public Player(String name) {
		this.name = name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public String getName() {
		return this.name;
	}

	//æ”¯æ´ç›Ÿå‹æ–¹æ³•çš„å®ç°
	public void help() {
		System.out.println("åšæŒä½ï¼Œ" + this.name + "æ¥æ•‘ä½ ï¼");
	}

	//é­å—æ”»å‡»æ–¹æ³•çš„å®ç°ï¼Œå½“é­å—æ”»å‡»æ—¶å°†è°ƒç”¨æˆ˜é˜Ÿæ§åˆ¶ä¸­å¿ƒç±»çš„é€šçŸ¥æ–¹æ³•notifyObserver()æ¥é€šçŸ¥ç›Ÿå‹
	public void beAttacked(AllyControlCenter acc) {
		System.out.println(this.name + "è¢«æ”»å‡»ï¼");
		acc.notifyObserver(name);
	}
}
```

```java
//å®¢æˆ·ç«¯ä»£ç 
public class Client {
	public static void main(String args[]) {
		//å®šä¹‰è§‚å¯Ÿç›®æ ‡å¯¹è±¡
		AllyControlCenter acc;
		acc = new ConcreteAllyControlCenter("é‡‘åº¸ç¾¤ä¾ ");

        //å®šä¹‰å››ä¸ªè§‚å¯Ÿè€…å¯¹è±¡
		Observer player1,player2,player3,player4,player5;

        //æ³¨å†Œè§‚å¯Ÿè€…
		player1 = new Player("æ¨è¿‡");
		acc.join(player1);

		player2 = new Player("ä»¤ç‹å†²");
		acc.join(player2);

		player3 = new Player("å¼ æ— å¿Œ");
		acc.join(player3);

		player4 = new Player("æ®µèª‰");
		acc.join(player4);

		player5 = new Player("éƒ­é–");
		acc.join(player5);


		//æŸæˆå‘˜é­å—æ”»å‡» è°ƒç”¨é€šçŸ¥æ–¹æ³•
		player2.beAttacked(acc);
	}
}
```

## é€‚é…å™¨æ¨¡å¼

### ä»‹ç»

é€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œæ—¨åœ¨è§£å†³ä¸¤ä¸ªä¸å…¼å®¹æ¥å£ä¹‹é—´çš„å…¼å®¹æ€§é—®é¢˜ã€‚å®ƒå…è®¸å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·ç«¯æ‰€æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£

### ç»“æ„

![image-20230528124621463](https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230528124621463.png)

### è§’è‰²

- Targetï¼ˆç›®æ ‡æŠ½è±¡ç±»ï¼‰
- Adapterï¼ˆé€‚é…å™¨ç±»ï¼‰
- Adapteeï¼ˆé€‚é…è€…ç±»ï¼‰

### å®ç°

```java
//æ•‘æŠ¤è½¦ç¯ç±»ï¼Œå……å½“é€‚é…è€…
public class AmbulanceLamp {
	public void alarmLamp() {
		System.out.println("å‘ˆç°æ•‘æŠ¤è½¦ç¯é—ªçƒï¼");
	}
}
```

```java
//æ•‘æŠ¤è½¦å£°éŸ³ç±»ï¼Œå……å½“é€‚é…è€…
public class AmbulanceSound {
	public void alarmSound() {
		System.out.println("å‘å‡ºæ•‘æŠ¤è½¦å£°éŸ³ï¼");
	}
}
```

```java
//æ•‘æŠ¤è½¦é€‚é…å™¨ï¼Œå……å½“é€‚é…å™¨
public class AmbulanceCarAdapter extends CarController {
	private AmbulanceSound sound;  //å®šä¹‰é€‚é…è€…AmbulanceSoundå¯¹è±¡
	private AmbulanceLamp lamp;    //å®šä¹‰é€‚é…è€…AmbulanceLampå¯¹è±¡

	public AmbulanceCarAdapter() {
		sound = new AmbulanceSound();
		lamp = new AmbulanceLamp();
	}

	//å‘å‡ºæ•‘æŠ¤è½¦å£°éŸ³
	public void phonate() {
		sound.alarmSound();  //è°ƒç”¨é€‚é…è€…ç±»AmbulanceSoundçš„æ–¹æ³•(ç±»ä¼¼äºè½¬å‘è°ƒç”¨)
	}

	//å‘ˆç°æ•‘æŠ¤è½¦ç¯é—ªçƒ
	public void twinkle() {
		lamp.alarmLamp();   //è°ƒç”¨é€‚é…è€…ç±»AmbulanceLampçš„æ–¹æ³•
	}
}
```

```java
//æ±½è½¦æ§åˆ¶ç±»ï¼Œå……å½“ç›®æ ‡æŠ½è±¡ç±»
public abstract class CarController {
    public void move() {
        System.out.println("ç©å…·æ±½è½¦ç§»åŠ¨ï¼");
    }

    public abstract void phonate(); //å‘å‡ºå£°éŸ³

    public abstract void twinkle(); //ç¯å…‰é—ªçƒ
}
```

## æŠ½è±¡å·¥å‚æ¨¡å¼

### ä»‹ç»

æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— é¡»æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚åˆç§°ä¸ºå·¥å…·(Kit)æ¨¡å¼æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­çš„å…·ä½“å·¥å‚ä¸åªæ˜¯åˆ›å»ºä¸€ç§äº§å“ï¼Œå®ƒè´Ÿè´£åˆ›å»ºä¸€æ—äº§å“å½“ä¸€ä¸ªå·¥å‚ç­‰çº§ç»“æ„å¯ä»¥åˆ›å»ºå‡ºåˆ†å±äºä¸åŒäº§å“ç­‰çº§ç»“æ„çš„ä¸€ä¸ªäº§å“æ—ä¸­çš„æ‰€æœ‰å¯¹è±¡æ—¶ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼æ¯”å·¥å‚æ–¹æ³•æ¨¡å¼æ›´ä¸ºç®€å•ã€æ›´æœ‰æ•ˆç‡

### ç»“æ„

![image-20230529121322432](https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230529121322432.png)

### è§’è‰²

- Abstract Factoryï¼ˆæŠ½è±¡å·¥å‚ï¼‰
- Concrete Factoryï¼ˆå…·ä½“å·¥å‚ï¼‰
- Abstract Productï¼ˆæŠ½è±¡äº§å“ï¼‰
- Concrete Productï¼ˆå…·ä½“äº§å“ï¼‰

### å®ç°

**ä¸‰ç§æŠ½è±¡äº§å“**

```java
// æŠ½è±¡æŒ‰é’®
public interface Button {
	public void display();
}
```

```java
// æŠ½è±¡è¾¹æ¡†
public interface ComboBox {
	public void display();
}
```

```java
// æŠ½è±¡æ–‡æœ¬æ¡†
public interface TextField {
	public void display();
}
```

**æŠ½è±¡å·¥å‚**

```java
public interface SkinFactory {
	public Button createButton();
	public TextField createTextField();
	public ComboBox createComboBox();
}
```

**å…·ä½“äº§å“ï¼ˆéƒ¨åˆ†ï¼‰**

```java
	public class SpringButton implements Button {
	public void display() {
		System.out.println("æ˜¾ç¤ºæµ…ç»¿è‰²æŒ‰é’®ã€‚");
	}
}
```

```java
public class SpringComboBox implements ComboBox {
	public void display() {
		System.out.println("æ˜¾ç¤ºç»¿è‰²è¾¹æ¡†ç»„åˆæ¡†ã€‚");
	}
}
```

```java
public class SummerButton implements Button {
	public void display() {
		System.out.println("æ˜¾ç¤ºæµ…è“è‰²æŒ‰é’®ã€‚");
	}
}
```

```java
public class SummerComboBox implements ComboBox {
	public void display() {
		System.out.println("æ˜¾ç¤ºè“è‰²è¾¹æ¡†ç»„åˆæ¡†ã€‚");
	}
}
```

**å…·ä½“å·¥å‚**

```java
// SpringSkinFactoryå·¥å‚
public class SpringSkinFactory implements SkinFactory {
	public Button createButton() {
		return new SpringButton();
	}

	public TextField createTextField() {
		return new SpringTextField();
	}

	public ComboBox createComboBox() {
		return new SpringComboBox();
	}
}
```

```java
// SummerSkinFactoryå·¥å‚
public class SummerSkinFactory implements SkinFactory {
	public Button createButton() {
		return new SummerButton();
	}

	public TextField createTextField() {
		return new SummerTextField();
	}

	public ComboBox createComboBox() {
		return new SummerComboBox();
	}
}
```

## å»ºé€ è€…æ¨¡å¼

### ä»‹ç»

å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„==æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»==ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚å°†å®¢æˆ·ç«¯ä¸åŒ…å«å¤šä¸ªéƒ¨ä»¶çš„å¤æ‚å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹åˆ†ç¦»ï¼Œå®¢æˆ·ç«¯æ— é¡»çŸ¥é“å¤æ‚å¯¹è±¡çš„å†…éƒ¨ç»„æˆéƒ¨åˆ†ä¸è£…é…æ–¹å¼ï¼Œåªéœ€è¦çŸ¥é“æ‰€éœ€å»ºé€ è€…çš„ç±»å‹å³å¯å…³æ³¨å¦‚ä½•é€æ­¥åˆ›å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œä¸åŒçš„å»ºé€ è€…å®šä¹‰äº†ä¸åŒçš„åˆ›å»ºè¿‡ç¨‹

### ç»“æ„

![image-20230529185109415](https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230529185109415.png)

### è§’è‰²

- Builderï¼ˆæŠ½è±¡å»ºé€ è€…ï¼‰
- Concrete Builderï¼ˆå…·ä½“å»ºé€ è€…ï¼‰
- Productï¼ˆäº§å“ï¼‰
- Directorï¼ˆæŒ‡æŒ¥è€…ï¼‰

### å®ç°

```java
// å…·ä½“è§’è‰²ç±»ï¼ˆäº§å“ï¼‰
public class Actor {
	private String type; //è§’è‰²ç±»å‹
	private String sex; //æ€§åˆ«
	private String face; //è„¸å‹
	private String costume; //æœè£…
	private String hairstyle; //å‘å‹

//çœç•¥å…·ä½“çš„getter setter
}
```

```java
// æŠ½è±¡å»ºé€ è€…
public abstract class ActorBuilder {
    protected Actor actor = new Actor();

    public abstract void buildType();

    public abstract void buildSex();

    public abstract void buildFace();

    public abstract void buildCostume();

    public abstract void buildHairstyle();

    //å·¥å‚æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªå®Œæ•´çš„æ¸¸æˆè§’è‰²å¯¹è±¡
    public Actor createActor() {
        return actor;
    }
}
```

```java
// å…·ä½“å»ºé€ è€…
public class AngelBuilder extends ActorBuilder {
	public void buildType() {
		actor.setType("å¤©ä½¿");
	}

	public void buildSex() {
		actor.setSex("å¥³");
	}

	public void buildFace() {
		actor.setFace("æ¼‚äº®");
	}

	public void buildCostume() {
		actor.setCostume("ç™½è£™");
	}

	public void buildHairstyle() {
		actor.setHairstyle("æŠ«è‚©é•¿å‘");
	}
}
```

```java
// æŒ‡æŒ¥è€…
public class ActorController {
    //é€æ­¥æ„å»ºå¤æ‚äº§å“å¯¹è±¡
	public Actor construct(ActorBuilder ab) {
		Actor actor;
		ab.buildType();
		ab.buildSex();
		ab.buildFace();
		ab.buildCostume();
		ab.buildHairstyle();
		actor=ab.createActor();
		return actor;
	}
}
```

```java
// å®¢æˆ·ç«¯ä»£ç 
public class Client {
    public static void main(String args[]) {
        //é’ˆå¯¹æŠ½è±¡å»ºé€ è€…ç¼–ç¨‹
        ActorBuilder ab;
        //åå°„ç”Ÿæˆå…·ä½“å»ºé€ è€…å¯¹è±¡
        ab = (ActorBuilder)XMLUtil.getBean();

        ActorController ac = new ActorController();
        Actor actor;

        //é€šè¿‡æŒ‡æŒ¥è€…åˆ›å»ºå®Œæ•´çš„å»ºé€ è€…å¯¹è±¡
        //ä¼ å…¥å…·ä½“å»ºé€ è€…å¯¹è±¡ï¼ˆActorBuilder çš„å­ç±»å¯¹è±¡ï¼‰
        actor = ac.construct(ab);


        String type = actor.getType();
        System.out.println(type + "çš„å¤–è§‚ï¼š");
        System.out.println("æ€§åˆ«ï¼š" + actor.getSex());
        System.out.println("é¢å®¹ï¼š" + actor.getFace());
        System.out.println("æœè£…ï¼š" + actor.getCostume());
        System.out.println("å‘å‹ï¼š" + actor.getHairstyle());
    }
}
```

## åŸå‹æ¨¡å¼

### ä»‹ç»

ä½¿ç”¨åŸå‹å®ä¾‹æŒ‡å®šå¾…åˆ›å»ºå¯¹è±¡çš„ç±»å‹ï¼Œå¹¶ä¸”é€šè¿‡å¤åˆ¶è¿™ä¸ªåŸå‹æ¥åˆ›å»ºæ–°çš„å¯¹è±¡

### ç»“æ„

![image-20230530091411776](https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230530091411776.png)

### è§’è‰²

- Prototypeï¼ˆæŠ½è±¡åŸå‹ç±»ï¼‰
- Concrete Prototypeï¼ˆå…·ä½“åŸå‹ç±»ï¼‰
- Clientï¼ˆå®¢æˆ·ç±»ï¼‰

### å®ç°

#### æµ…æ‹·è´

(å…¶ä¸­çš„å¼•ç”¨å¯¹è±¡ç›¸åŒ)

```java
public class WeeklyLog implements Cloneable {
    //ä¸ºäº†ç®€åŒ–è®¾è®¡å’Œå®ç°ï¼Œå‡è®¾ä¸€ä»½å·¥ä½œå‘¨æŠ¥ä¸­åªæœ‰ä¸€ä¸ªé™„ä»¶å¯¹è±¡ï¼Œå®é™…æƒ…å†µä¸­å¯ä»¥åŒ…å«å¤šä¸ªé™„ä»¶ï¼Œå¯ä»¥é€šè¿‡Listç­‰é›†åˆå¯¹è±¡æ¥å®ç°
    private Attachment attachment;
    private String name;
    private String date;
    private String content;

    public void setAttachment(Attachment attachment) {
        this.attachment = attachment;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void setDate(String date) {
        this.date = date;
    }

    public void setContent(String content) {
        this.content = content;
    }

    public Attachment getAttachment() {
        return (this.attachment);
    }

    public String getName() {
        return (this.name);
    }

    public String getDate() {
        return (this.date);
    }

    public String getContent() {
        return (this.content);
    }

    //ä½¿ç”¨clone()æ–¹æ³•å®ç°æµ…å…‹éš†
    public WeeklyLog clone() {
        Object obj = null;
        try {
            obj = super.clone();
            return (WeeklyLog) obj;
        } catch (CloneNotSupportedException e) {
            System.out.println("ä¸æ”¯æŒå¤åˆ¶ï¼");
            return null;
        }
    }
}
```

#### æ·±æ‹·è´

==ï¼ˆåºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼‰==

åºåˆ—åŒ–æ˜¯å°†å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµçš„è¿‡ç¨‹ï¼Œå¯ä»¥å°†å¯¹è±¡ä¿å­˜åˆ°æ–‡ä»¶ã€ä¼ è¾“åˆ°ç½‘ç»œæˆ–åœ¨è¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚åœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œå¯¹è±¡çš„çŠ¶æ€ï¼ˆå³å¯¹è±¡çš„æ•°æ®ï¼‰è¢«è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—ï¼ŒåŒ…æ‹¬å¯¹è±¡çš„å­—æ®µå’Œç›¸åº”çš„æ•°å€¼ã€‚åºåˆ—åŒ–åçš„å­—èŠ‚æµå¯ä»¥è¢«ä¿å­˜ä¸‹æ¥æˆ–ä¼ è¾“ç»™å…¶ä»–åœ°æ–¹ã€‚

ååºåˆ—åŒ–æ˜¯å°†å­—èŠ‚æµè½¬æ¢ä¸ºå¯¹è±¡çš„è¿‡ç¨‹ï¼Œå°†ä¿å­˜åœ¨å­—èŠ‚æµä¸­çš„æ•°æ®é‡æ–°æ„é€ æˆå¯¹è±¡ã€‚åœ¨ååºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œå­—èŠ‚åºåˆ—è¢«è¿˜åŸä¸ºå¯¹è±¡çš„çŠ¶æ€ï¼Œé‡æ–°åˆ›å»ºå¯¹è±¡å¹¶å°†ä¿å­˜çš„æ•°æ®å¡«å……åˆ°å¯¹è±¡çš„å­—æ®µä¸­ã€‚

åœ¨å†™å…¥å­—èŠ‚æµæ—¶ï¼Œå¯¹è±¡çš„æ‰€æœ‰å­—æ®µéƒ½ä¼šè¢«åºåˆ—åŒ–ä¸ºå­—èŠ‚åºåˆ—ã€‚è€Œåœ¨è¯»å–å­—èŠ‚æµæ—¶ï¼Œå­—èŠ‚åºåˆ—ä¼šè¢«ååºåˆ—åŒ–ä¸ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¹¶å°†ä¿å­˜çš„æ•°æ®å¡«å……åˆ°æ–°å¯¹è±¡çš„å­—æ®µä¸­ã€‚

ç”±äºååºåˆ—åŒ–è¿‡ç¨‹ä¼šé‡æ–°åˆ›å»ºå¯¹è±¡ï¼Œå› æ­¤æ–°å¯¹è±¡ä¸åŸå§‹å¯¹è±¡æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œå®ƒä»¬æ‹¥æœ‰ç›¸åŒçš„æ•°æ®ä½†æ˜¯ä½äºä¸åŒçš„å†…å­˜ä½ç½®ã€‚è¿™æ ·å°±å®ç°äº†æ·±æ‹·è´ï¼Œä¿ç•™äº†å¯¹è±¡åŠå…¶æ‰€æœ‰å¼•ç”¨ç±»å‹å­—æ®µçš„æ•°æ®ï¼Œå¹¶ä¸”ä¸å…±äº«åŒä¸€å—å†…å­˜ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†ä½¿å¯¹è±¡èƒ½å¤Ÿè¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œéœ€è¦å®ç° `Serializable` æ¥å£ï¼Œå¹¶ç¡®ä¿å¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨ç±»å‹å­—æ®µä¹Ÿæ˜¯å¯åºåˆ—åŒ–çš„ã€‚

```java
public class WeeklyLog implements Serializable {
	private Attachment attachment;
	private String name;
	private String date;
	private String content;

	public void setAttachment(Attachment attachment) {
		this.attachment = attachment;
	}

	public void setName(String name) {
		this.name = name;
	}

	public void setDate(String date) {
		this.date = date;
	}

	public void setContent(String content) {
		this.content = content;
	}

	public Attachment getAttachment() {
		return (this.attachment);
	}

	public String getName() {
		return (this.name);
	}

	public String getDate() {
		return (this.date);
	}

	public String getContent() {
		return (this.content);
	}

	//ä½¿ç”¨åºåˆ—åŒ–æŠ€æœ¯å®ç°æ·±å…‹éš†
	public WeeklyLog deepClone() throws IOException, ClassNotFoundException, OptionalDataException {
		//å°†å¯¹è±¡å†™å…¥æµä¸­
		ByteArrayOutputStream bao=new ByteArrayOutputStream();
		ObjectOutputStream oos=new ObjectOutputStream(bao);
		oos.writeObject(this);

		//å°†å¯¹è±¡ä»æµä¸­å–å‡º
		ByteArrayInputStream bis=new ByteArrayInputStream(bao.toByteArray());
		ObjectInputStream ois=new ObjectInputStream(bis);
		return (WeeklyLog)ois.readObject();
	}
}
```

## å•ä¾‹æ¨¡å¼

### ä»‹ç»

ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹æ¥è®¿é—®è¿™ä¸ªå”¯ä¸€å®ä¾‹ã€‚

### ç»“æ„

![image-20230530150040291](https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230530150040291.png)

### è§’è‰²

- Singletonï¼ˆå•ä¾‹ï¼‰

### å®ç°

#### é¥¿æ±‰å¼

```java
public class Singleton {
    // ç§æœ‰é™æ€å˜é‡ï¼Œç”¨äºä¿å­˜å•ä¾‹å®ä¾‹
    private static Singleton instance = new Singleton();

    // ç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢å¤–éƒ¨ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡
    private Singleton() {
        // åˆå§‹åŒ–æ“ä½œ
    }

    // å…¬å…±é™æ€æ–¹æ³•ï¼Œæä¾›å…¨å±€è®¿é—®ç‚¹è·å–å•ä¾‹å®ä¾‹
    public static Singleton getInstance() {
        return instance;
    }
}

```

#### æ‡’æ±‰å¼

- åŸºç¡€ç‰ˆ

å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½ä¼šå‡ºç°é—®é¢˜ã€‚å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®`getInstance()`æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨`instance`è¿˜æœªè¢«åˆ›å»ºæ—¶ï¼Œé‚£ä¹ˆæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šé€šè¿‡åˆ¤æ–­`instance`ä¸º`null`çš„æ¡ä»¶ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚è¿™æ ·å°±ä¼šç ´åå•ä¾‹çš„å”¯ä¸€æ€§ï¼Œå¯¼è‡´å¤šä¸ªå®ä¾‹è¢«åˆ›å»ºã€‚

```java
public class LazySingleton {
    private static LazySingleton instance = null;

    private LazySingleton() { }

    public static LazySingleton getInstance() {
        if (instance == null) {
            instance = new LazySingleton();
        }
        return instance;
    }
}

```

- æ·»åŠ é”æ–¹æ³•

é€šè¿‡`synchronized`å…³é”®å­—ä¿®é¥°`getInstance()`æ–¹æ³•ï¼Œä»¥ç¡®ä¿åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹åªåˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚å½“ç¬¬ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨`getInstance()`æ–¹æ³•æ—¶ï¼Œå¦‚æœå®ä¾‹å°šæœªåˆ›å»ºï¼Œå®ƒå°†åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹

<u>å­˜åœ¨ç¼ºç‚¹</u>ï¼š

1. æ¯æ¬¡è°ƒç”¨`getInstance()`æ–¹æ³•éƒ½ä¼šè¿›å…¥`synchronized`åŒæ­¥å—ï¼Œå³ä½¿å®ä¾‹å·²ç»è¢«åˆ›å»ºã€‚è¿™ä¼šé€ æˆä¸å¿…è¦çš„åŒæ­¥å¼€é”€ï¼Œå½±å“æ€§èƒ½ã€‚
2. åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶é€šè¿‡ç¬¬ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶`instance == null`æ—¶ï¼Œå®ƒä»¬ä¼šä¾æ¬¡è¿›å…¥`synchronized`åŒæ­¥å—ï¼Œè€Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿåˆ›å»ºå®ä¾‹ï¼Œå…¶ä»–çº¿ç¨‹ä¼šè¢«é˜»å¡ã€‚è¿™å¯èƒ½ä¼šå¼•èµ·çº¿ç¨‹ç«äº‰å’Œæ€§èƒ½é—®é¢˜ã€‚

```java
public class LazySingleton {
    private static LazySingleton instance = null;

    private LazySingleton() {
        // ç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢å¤–éƒ¨ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡
    }

    /**
     * å…¬å…±é™æ€æ–¹æ³•ï¼Œæä¾›å…¨å±€è®¿é—®ç‚¹è·å–å•ä¾‹å®ä¾‹
     *
     * @return å•ä¾‹å®ä¾‹
     */
    synchronized public static LazySingleton getInstance() {
        if (instance == null) {
            // å¦‚æœå®ä¾‹ä¸ºç©ºï¼Œåˆ™åˆ›å»ºæ–°çš„å®ä¾‹
            instance = new LazySingleton();
        }
        return instance;
    }
}
```

- é”ä»£ç æ®µ

![image-20230530151643226](https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230530151643226.png)

```java
public class LazySingleton {
    private volatile static LazySingleton instance = null;

    private LazySingleton() {
        // ç§æœ‰æ„é€ å‡½æ•°
    }

    public static LazySingleton getInstance() {
        if (instance == null) { // ç¬¬ä¸€ä¸ªåˆ¤æ–­ï¼Œé¿å…ä¸å¿…è¦çš„åŒæ­¥
            synchronized (LazySingleton.class) { // synchronizedå…³é”®å­—ä¿®é¥°çš„åŒæ­¥å—
                if (instance == null) { // ç¬¬äºŒä¸ªåˆ¤æ–­ï¼Œç¡®ä¿åªæœ‰ä¸€ä¸ªçº¿ç¨‹åˆ›å»ºå®ä¾‹
                    instance = new LazySingleton();
                }
            }
        }
        return instance;
    }
}

```

#### é™æ€å†…éƒ¨ç±»

==ç›¸å…³ä»‹ç»==ï¼š

åœ¨é™æ€å†…éƒ¨ç±»ä¸­å®šä¹‰çš„é™æ€æ–¹æ³•å¯ä»¥ç›´æ¥è¢«è°ƒç”¨ï¼Œä¸éœ€è¦é€šè¿‡åˆ›å»ºå†…éƒ¨ç±»çš„å®ä¾‹æ¥è®¿é—®ã€‚é™æ€å†…éƒ¨ç±»ä¸å¤–éƒ¨ç±»ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œå› æ­¤å¯ä»¥ç›´æ¥è®¿é—®é™æ€å†…éƒ¨ç±»ä¸­çš„é™æ€æˆå‘˜ï¼ŒåŒ…æ‹¬é™æ€æ–¹æ³•ã€‚

åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œé™æ€å†…éƒ¨ç±»`HolderClass`ä¸­çš„`instance`å˜é‡æ˜¯ç§æœ‰é™æ€çš„ï¼Œè€Œ`getInstance()`æ–¹æ³•æ˜¯å…¬å…±é™æ€çš„ã€‚è¿™æ„å‘³ç€å¯ä»¥é€šè¿‡`Singleton.HolderClass.instance`ç›´æ¥è®¿é—®`instance`å˜é‡ï¼Œä¹Ÿå¯ä»¥é€šè¿‡`Singleton.getInstance()`è°ƒç”¨`getInstance()`æ–¹æ³•æ¥è·å–å•ä¾‹å®ä¾‹ã€‚è¿™ç§æ–¹å¼æä¾›äº†æ›´ç®€æ´çš„è®¿é—®æ–¹å¼ï¼Œæ— éœ€æ˜¾å¼åˆ›å»ºå†…éƒ¨ç±»å®ä¾‹ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé™æ€å†…éƒ¨ç±»ä¸­ä¸èƒ½ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„éé™æ€æˆå‘˜ï¼Œå› ä¸ºé™æ€å†…éƒ¨ç±»åœ¨æ²¡æœ‰å¤–éƒ¨ç±»å®ä¾‹çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥è¢«è®¿é—®ã€‚å¦‚æœéœ€è¦è®¿é—®å¤–éƒ¨ç±»çš„éé™æ€æˆå‘˜ï¼Œå¯ä»¥é€šè¿‡åˆ›å»ºå¤–éƒ¨ç±»çš„å®ä¾‹æ¥å®ç°ã€‚

```java
// Initialization on Demand Holder
public class Singleton {
    private Singleton() {
        // ç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢å¤–éƒ¨ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡
    }

    // é™æ€å†…éƒ¨ç±»
    private static class HolderClass {
        private final static Singleton instance = new Singleton();
    }

    /**
     * å…¬å…±é™æ€æ–¹æ³•ï¼Œæä¾›å…¨å±€è®¿é—®ç‚¹è·å–å•ä¾‹å®ä¾‹
     *
     * @return å•ä¾‹å®ä¾‹
     */
    public static Singleton getInstance() {
        return HolderClass.instance;
    }
}

```

```java
// å¯¹åº”è°ƒç”¨æ–¹æ³•
public class Main {
    public static void main(String[] args) {
        Singleton singleton = Singleton.getInstance();
        // ä½¿ç”¨å•ä¾‹å¯¹è±¡
    }
}
```

## æ¡¥æ¥æ¨¡å¼

### ä»‹ç»

æ¡¥æ¥æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒæ—¨åœ¨å°†æŠ½è±¡éƒ¨åˆ†ä¸å…¶å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚å®ƒé€šè¿‡åˆ›å»ºä¸€ä¸ªæ¡¥æ¥æ¥å£ï¼Œå°†æŠ½è±¡å’Œå®ç°è§£è€¦ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°è¿›è¡Œæ‰©å±•ã€‚

åœ¨æ¡¥æ¥æ¨¡å¼ä¸­ï¼Œå­˜åœ¨ä¸¤ä¸ªç»´åº¦çš„æŠ½è±¡å’Œå®ç°ï¼Œé€šè¿‡æ¡¥æ¥æ¥å£å°†å®ƒä»¬è¿æ¥èµ·æ¥ã€‚å…¶ä¸­ï¼ŒæŠ½è±¡éƒ¨åˆ†å®šä¹‰äº†é«˜å±‚çš„æŠ½è±¡æ–¹æ³•å’Œå±æ€§ï¼Œè€Œå®ç°éƒ¨åˆ†å®šä¹‰äº†å…·ä½“å®ç°çš„æ–¹æ³•å’Œå±æ€§ã€‚é€šè¿‡æ¡¥æ¥æ¥å£ï¼ŒæŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†å¯ä»¥ç‹¬ç«‹åœ°è¿›è¡Œæ‰©å±•å’Œå˜åŒ–ï¼Œè€Œå½¼æ­¤ä¹‹é—´çš„å…³ç³»é€šè¿‡æ¡¥æ¥æ¥å£æ¥å®ç°ã€‚

### ç»“æ„

![image-20230530152030299](https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230530152030299.png)

### è§’è‰²

- Abstractionï¼ˆæŠ½è±¡ç±»ï¼‰
- Refined Abstractionï¼ˆæ‰©å……æŠ½è±¡ç±»ï¼‰
- Implementorï¼ˆå®ç°ç±»æ¥å£ï¼‰
- Concrete Implementorï¼ˆå…·ä½“å®ç°ç±»ï¼‰

### å®ç°

**ç†è§£**ï¼šé€šè¿‡æ¡¥æ¥æ¨¡å¼ï¼Œå›¾åƒå®ç°ç±»ï¼ˆå¦‚ `LinuxImp`ï¼‰å’Œæ“ä½œç³»ç»Ÿå®ç°ç±»ï¼ˆå¦‚ `Linux`ï¼‰è¢«è§£è€¦ï¼Œå®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–å’Œæ‰©å±•ã€‚å›¾åƒå®ç°ç±»è´Ÿè´£å°†å›¾åƒæ•°æ®è½¬æ¢æˆç‰¹å®šæ ¼å¼ï¼ˆå¦‚åƒç´ çŸ©é˜µï¼‰ï¼Œè€Œæ“ä½œç³»ç»Ÿå®ç°ç±»è´Ÿè´£å°†åƒç´ çŸ©é˜µåœ¨ç‰¹å®šæ“ä½œç³»ç»Ÿä¸­è¿›è¡Œæ˜¾ç¤ºã€‚è¿™æ ·ï¼Œé€šè¿‡æ³¨å…¥ä¸åŒçš„å›¾åƒå®ç°ç±»å’Œæ“ä½œç³»ç»Ÿå®ç°ç±»ï¼Œå¯ä»¥å®ç°ä¸åŒå›¾åƒæ ¼å¼åœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸‹çš„æ˜¾ç¤ºï¼Œè€Œä¸éœ€è¦ä¿®æ”¹ç°æœ‰çš„ç±»ç»“æ„ã€‚

```java
//æŠ½è±¡å›¾åƒç±»ï¼Œå……å½“æŠ½è±¡ç±»
public abstract class Image {
    protected ImageImp imp;

    //æ³¨å…¥å®ç°ç±»æ¥å£å¯¹è±¡
    //æ¡¥æ¥çš„å…³é”®ä½ç½®
    public void setImageImp(ImageImp imp) {
        this.imp = imp;
    }

    //è§£ææ–‡ä»¶
    public abstract void parseFile(String fileName);
}
```

```java
//å…·ä½“å›¾åƒç±»
//BMPæ ¼å¼å›¾åƒç±»ï¼Œå……å½“æ‰©å……æŠ½è±¡ç±»
public class BMPImage extends Image {
	public void parseFile(String fileName) {
      //æ¨¡æ‹Ÿè§£æBMPæ–‡ä»¶å¹¶è·å¾—ä¸€ä¸ªåƒç´ çŸ©é˜µå¯¹è±¡m;
      Matrix m = new Matrix();
      imp.doPaint(m);
      System.out.println(fileName + "ï¼Œæ ¼å¼ä¸ºBMPã€‚");
  }
}

//GIFæ ¼å¼å›¾åƒç±»ï¼Œå……å½“æ‰©å……æŠ½è±¡ç±»
public class GIFImage extends Image {
	public void parseFile(String fileName) {
      //æ¨¡æ‹Ÿè§£æGIFæ–‡ä»¶å¹¶è·å¾—ä¸€ä¸ªåƒç´ çŸ©é˜µå¯¹è±¡m;
      Matrix m = new Matrix();
      imp.doPaint(m);
      System.out.println(fileName + "ï¼Œæ ¼å¼ä¸ºGIFã€‚");
  }
}
```

```java
//æŠ½è±¡æ“ä½œç³»ç»Ÿå®ç°ç±»ï¼Œå……å½“å®ç°ç±»æ¥å£
public interface ImageImp {
    public void doPaint(Matrix m);  //æ˜¾ç¤ºåƒç´ çŸ©é˜µm
}
```

```java
//Linuxæ“ä½œç³»ç»Ÿå®ç°ç±»ï¼Œå……å½“å…·ä½“å®ç°ç±»
public class LinuxImp implements ImageImp {
  public void doPaint(Matrix m) {
  	//è°ƒç”¨Linuxç³»ç»Ÿçš„ç»˜åˆ¶å‡½æ•°ç»˜åˆ¶åƒç´ çŸ©é˜µ
  	System.out.print("åœ¨Linuxæ“ä½œç³»ç»Ÿä¸­æ˜¾ç¤ºå›¾åƒï¼š");
  }
}
```

```java
//åƒç´ çŸ©é˜µç±»ï¼Œè¾…åŠ©ç±»
public class Matrix {
    //ä»£ç çœç•¥
}
```

## çŠ¶æ€æ¨¡å¼

### ä»‹ç»

å®ƒå…è®¸å¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å…¶è¡Œä¸ºã€‚è¯¥æ¨¡å¼å°†å¯¹è±¡çš„è¡Œä¸ºå°è£…åœ¨ä¸åŒçš„çŠ¶æ€å¯¹è±¡ä¸­ï¼Œä½¿å¾—å¯¹è±¡åœ¨ä¸åŒçŠ¶æ€ä¸‹å…·æœ‰ä¸åŒçš„è¡Œä¸ºï¼ŒåŒæ—¶å°†çŠ¶æ€çš„åˆ‡æ¢å’Œè¡Œä¸ºçš„æ‰§è¡Œè§£è€¦ã€‚

### ç»“æ„

![image-20230531170222824](https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230531170222824.png)

### è§’è‰²

- Contextï¼ˆç¯å¢ƒç±»ï¼‰

- Stateï¼ˆæŠ½è±¡çŠ¶æ€ç±»ï¼‰

- Concrete Stateï¼ˆå…·ä½“çŠ¶æ€ç±»ï¼‰

### å®ç°

å…·ä½“çš„çŠ¶æ€è½¬æ¢é€»è¾‘ä½äºå…·ä½“çŠ¶æ€ç±»ä¸­ï¼Œæ¯ä¸ªçŠ¶æ€ç±»è´Ÿè´£è‡ªå·±çš„çŠ¶æ€è½¬æ¢å’Œç›¸åº”çš„æ“ä½œ

é‚„æœ‰å¦å¤–å¹¾ç¨®ç‹€æ…‹é¡çš„è½‰æ›æ–¹å¼ åªæä¾›å°å°æ‡‰è½‰æ›æ–¹å¼ä»£ç¢¼

```java
//æŠ½è±¡é–‹é—œå°è±¡
public abstract class SwitchState {
	public abstract void on(Switch s);
	public abstract void off(Switch s);

}
```

```java
// å…·é«”é–‹é—œå°è±¡
// æ–¹æ³•ä¸­æœƒå‚³å…¥ä¸€å€‹å°è±¡ å¹¶ä¿®æ”¹è©²å°è±¡çš„currentstate
// å…·é«”ä»£ç¢¼å¯è¦‹switch

//æ‰“å¼€çŠ¶æ€ç±»
public class OnState extends SwitchState {
    public void on(Switch s) {
        System.out.println("å·²ç»æ‰“å¼€ï¼");
    }

    public void off(Switch s) {
        System.out.println("å…³é—­ï¼");
        s.setState(Switch.getState("off"));
    }
}


//å…³é—­çŠ¶æ€ç±»
public class OffState extends SwitchState{
	public void on(Switch s) {
		System.out.println("æ‰“å¼€ï¼");
		s.setState(Switch.getState("on"));
	}

	public void off(Switch s) {
		System.out.println("å·²ç»å…³é—­ï¼");
	}
}
```

```java
public class Switch {
	//å®šä¹‰ä¸‰ä¸ªé™æ€çš„çŠ¶æ€å¯¹è±¡ æ‰€æœ‰çš„å¼€å…³å¯¹è±¡å…±äº«çŠ¶æ€
	private static SwitchState currentState,onState,offState;
	private String name;

	// æ„é€ å‡½æ•° é»˜è®¤çŠ¶æ€ä¸ºå¼€å¯
	public Switch(String name) {
		this.name = name;
		onState = new OnState();
		offState = new OffState();
		currentState = onState;
	}

    // è©²æ–¹æ³•æœƒè¢«ç‹€æ…‹æ–¹æ³•é€²è¡Œèª¿ç”¨
	public void setState(SwitchState state) {
		currentState = state;
	}


	public static SwitchState getState(String type) {
		if (type.equalsIgnoreCase("on")) {
			return onState;
		}
		else {
			return offState;
		}
	}


    //ä¸‹é¢å…©å€‹æ–¹æ³•æœƒå°‡ç•¶å‰å°è±¡å‚³å…¥ è‹¥ç‹€æ…‹æ”¹è®Šå‰‡æœƒå°å°cuurenté€²è¡Œä¿®æ”¹
    //æ‰“å¼€å¼€å…³
	public void on() {
		System.out.print(name);
		currentState.on(this);
	}

	//å…³é—­å¼€å…³
	public void off() {
		System.out.print(name);
		currentState.off(this);
	}

```

### å…¶é¤˜è½‰æ›æ–¹å¼å¯¦ç¾

- æ”¾å¤§é¡

```java
//åœ¨ç’°å¢ƒé¡ä¸­é€²è¡Œè½‰æ›
//å±å¹•ç±»ï¼šç¯å¢ƒç±»
public class Screen {
	//æšä¸¾æ‰€æœ‰çš„çŠ¶æ€ï¼ŒcurrentStateè¡¨ç¤ºå½“å‰çŠ¶æ€
	private ScreenState currentState, normalState, largerState, largestState;

	public Screen() {
  	this.normalState = new NormalState(); //åˆ›å»ºæ­£å¸¸çŠ¶æ€å¯¹è±¡
  	this.largerState = new LargerState(); //åˆ›å»ºäºŒå€æ”¾å¤§çŠ¶æ€å¯¹è±¡
  	this.largestState = new LargestState(); //åˆ›å»ºå››å€æ”¾å¤§çŠ¶æ€å¯¹è±¡
  	this.currentState = normalState; //è®¾ç½®åˆå§‹çŠ¶æ€
  	this.currentState.display();
	}

	public void setState(ScreenState state) {
		this.currentState = state;
	}

	//å•å‡»äº‹ä»¶å¤„ç†æ–¹æ³•ï¼Œå°è½¬äº†å¯¹çŠ¶æ€ç±»ä¸­ä¸šåŠ¡æ–¹æ³•çš„è°ƒç”¨å’ŒçŠ¶æ€çš„è½¬æ¢
	public void onClick() {
	  	if (this.currentState == normalState) {
	  		this.setState(largerState);
	  		this.currentState.display();
	  	}
	  	else if (this.currentState == largerState) {
	  		this.setState(largestState);
	  		this.currentState.display();
	  	}
	  	else if (this.currentState == largestState) {
	  		this.setState(normalState);
	  		this.currentState.display();
	  	}
	}
}

```

- éŠ€è¡Œè³¬æˆ¶

```java
//é“¶è¡Œè´¦æˆ·ï¼šç¯å¢ƒç±»
public class Account {
	private AccountState state; //ç»´æŒä¸€ä¸ªå¯¹æŠ½è±¡çŠ¶æ€å¯¹è±¡çš„å¼•ç”¨
	private String owner; //å¼€æˆ·å
	private double balance = 0; //è´¦æˆ·ä½™é¢

	public Account(String owner,double init) {
		this.owner = owner;
		this.balance = balance;
		this.state = new NormalState(this); //è®¾ç½®åˆå§‹çŠ¶æ€
		System.out.println(this.owner + "å¼€æˆ·ï¼Œåˆå§‹é‡‘é¢ä¸º" + init);
		System.out.println("---------------------------------------------");
	}

	public double getBalance() {
		return this.balance;
	}

	public void setBalance(double balance) {
		this.balance = balance;
	}

	public void setState(AccountState state) {
		this.state = state;
	}

	public void deposit(double amount) {
		System.out.println(this.owner + "å­˜æ¬¾" + amount);
		state.deposit(amount); //è°ƒç”¨çŠ¶æ€å¯¹è±¡çš„deposit()æ–¹æ³•
		System.out.println("ç°åœ¨ä½™é¢ä¸º"+ this.balance);
		System.out.println("ç°åœ¨å¸æˆ·çŠ¶æ€ä¸º"+ this.state.getClass().getName());
		System.out.println("---------------------------------------------");
	}

	public void withdraw(double amount) {
		System.out.println(this.owner + "å–æ¬¾" + amount);
		state.withdraw(amount); //è°ƒç”¨çŠ¶æ€å¯¹è±¡çš„withdraw()æ–¹æ³•
		System.out.println("ç°åœ¨ä½™é¢ä¸º"+ this.balance);
		System.out.println("ç°åœ¨å¸æˆ·çŠ¶æ€ä¸º"+ this. state.getClass().getName());
		System.out.println("---------------------------------------------");
	}

	public void computeInterest()
	{
		state.computeInterest(); //è°ƒç”¨çŠ¶æ€å¯¹è±¡çš„computeInterest()æ–¹æ³•
	}
}

```

```java
//æŠ½è±¡çŠ¶æ€ç±»
public abstract class AccountState {
	protected Account acc;
	public abstract void deposit(double amount);
	public abstract void withdraw(double amount);
	public abstract void computeInterest();
	public abstract void stateCheck();
}
```

```java
//æ­£å¸¸çŠ¶æ€ï¼šå…·ä½“çŠ¶æ€ç±»
public class NormalState extends AccountState {
	public NormalState(Account acc) {
		this.acc = acc;
	}

	public NormalState(AccountState state) {
		this.acc = state.acc;
	}

	public void deposit(double amount) {
		acc.setBalance(acc.getBalance() + amount);
		stateCheck();
	}

	public void withdraw(double amount) {
		acc.setBalance(acc.getBalance() - amount);
		stateCheck();
	}

	public void computeInterest()
	{
		System.out.println("æ­£å¸¸çŠ¶æ€ï¼Œæ— é¡»æ”¯ä»˜åˆ©æ¯ï¼");
	}

	//çŠ¶æ€è½¬æ¢
	public void stateCheck() {
		if (acc.getBalance() > -2000 && acc.getBalance() <= 0) {
			acc.setState(new OverdraftState(this));
		}
		else if (acc.getBalance() == -2000) {
			acc.setState(new RestrictedState(this));
		}
		else if (acc.getBalance() < -2000) {
			System.out.println("æ“ä½œå—é™ï¼");
		}
	}
}
```

```java
//é€æ”¯çŠ¶æ€ï¼šå…·ä½“çŠ¶æ€ç±»
public class OverdraftState extends AccountState {
	public OverdraftState(AccountState state) {
		this.acc = state.acc;
	}

	public void deposit(double amount) {
		acc.setBalance(acc.getBalance() + amount);
		stateCheck();
	}

	public void withdraw(double amount) {
		acc.setBalance(acc.getBalance() - amount);
		stateCheck();
	}

	public void computeInterest() {
		System.out.println("è®¡ç®—åˆ©æ¯ï¼");
	}

	//çŠ¶æ€è½¬æ¢
	public void stateCheck() {
		if (acc.getBalance() > 0) {
			acc.setState(new NormalState(this));
		}
		else if (acc.getBalance() == -2000) {
			acc.setState(new RestrictedState(this));
		}
		else if (acc.getBalance() < -2000) {
			System.out.println("æ“ä½œå—é™ï¼");
		}
	}
}

```

```java
//å—é™çŠ¶æ€ï¼šå…·ä½“çŠ¶æ€ç±»
public class RestrictedState extends AccountState {
	public RestrictedState(AccountState state) {
		this.acc = state.acc;
	}

	public void deposit(double amount) {
		acc.setBalance(acc.getBalance() + amount);
		stateCheck();
	}

	public void withdraw(double amount) {
		System.out.println("å¸å·å—é™ï¼Œå–æ¬¾å¤±è´¥");
	}

	public void computeInterest() {
		System.out.println("è®¡ç®—åˆ©æ¯ï¼");
	}

	//çŠ¶æ€è½¬æ¢
	public void stateCheck() {
		if(acc.getBalance() > 0) {
			acc.setState(new NormalState(this));
		}
		else if(acc.getBalance() > -2000) {
			acc.setState(new OverdraftState(this));
		}
	}
}

```

```java
public class Client {
	public static void main(String args[]) {
		Account acc = new Account("æ®µèª‰",0.0);
		acc.deposit(1000);
		acc.withdraw(2000);
		acc.deposit(3000);
		acc.withdraw(4000);
		acc.withdraw(1000);
		acc.computeInterest();
	}
}
```

## å‘½ä»¤æ¨¡å¼

### ä»‹ç»

å‘½ä»¤æ¨¡å¼ï¼ˆCommand Patternï¼‰ç”¨äºå°†è¯·æ±‚ï¼ˆå‘½ä»¤ï¼‰å°è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å¾—å¯ä»¥å°†ä¸åŒçš„è¯·æ±‚å‚æ•°åŒ–å¹¶ä¸”æ”¯æŒè¯·æ±‚çš„æ’é˜Ÿã€è®°å½•æ—¥å¿—ã€æ’¤é”€ç­‰æ“ä½œ

### ç»“æ„

![image-20230531111839798](https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230531111839798.png)

### è§’è‰²

- å‘½ä»¤æ¥å£ï¼ˆCommandï¼‰
- å…·ä½“å‘½ä»¤ï¼ˆConcrete Commandï¼‰
- å‘½ä»¤æ¥æ”¶è€…ï¼ˆReceiverï¼‰
- å‘½ä»¤å‘èµ·è€…ï¼ˆInvokerï¼‰

### å®ç°

```java
//	æŠ½è±¡å‘½ä»¤
public abstract class Command {
	public abstract void execute();
}
```

```java
// å…·ä½“å‘½ä»¤

// å¸®åŠ©
public class HelpCommand extends Command {
	private DisplayHelpClass hcObj;   //ç»´æŒå¯¹è¯·æ±‚æ¥æ”¶è€…çš„å¼•ç”¨

	public HelpCommand() {
		hcObj = new DisplayHelpClass();
	}

	//å‘½ä»¤æ‰§è¡Œæ–¹æ³•ï¼Œå°†è°ƒç”¨è¯·æ±‚æ¥æ”¶è€…çš„ä¸šåŠ¡æ–¹æ³•
	public void execute() {
		hcObj.display();
	}
}

// é€€å‡º
public class ExitCommand extends Command {
	private SystemExitClass seObj;  //ç»´æŒå¯¹è¯·æ±‚æ¥æ”¶è€…çš„å¼•ç”¨

	public ExitCommand() {
		seObj = new SystemExitClass();
	}

	//å‘½ä»¤æ‰§è¡Œæ–¹æ³•ï¼Œå°†è°ƒç”¨è¯·æ±‚æ¥æ”¶è€…çš„ä¸šåŠ¡æ–¹æ³•
	public void execute() {
		seObj.exit();
	}
}
```

```java
// æ¥æ”¶è€…

public class DisplayHelpClass {
	public void display() {
		System.out.println("æ˜¾ç¤ºå¸®åŠ©æ–‡æ¡£ï¼");
	}
}

public class SystemExitClass {
	public void exit() {
		System.out.println("é€€å‡ºç³»ç»Ÿï¼");
	}
}
```

```java
// è°ƒç”¨è€…
public class FunctionButton {
	private Command command;  //ç»´æŒä¸€ä¸ªæŠ½è±¡å‘½ä»¤å¯¹è±¡çš„å¼•ç”¨

	//ä¸ºåŠŸèƒ½é”®æ³¨å…¥å‘½ä»¤
	public void setCommand(Command command) {
		this.command = command;
	}

	//å‘é€è¯·æ±‚çš„æ–¹æ³•
	public void click() {
		System.out.print("å•å‡»åŠŸèƒ½é”®: ");
		command.execute();
	}
}
```

```java
// å®¢æˆ·ç«¯
public class Client {
	public static void main(String args[]) {

		FunctionButton fb = new FunctionButton();

		Command command; //å®šä¹‰å‘½ä»¤å¯¹è±¡
		command = (Command)XMLUtil.getBean(); //è¯»å–é…ç½®æ–‡ä»¶ï¼Œåå°„ç”Ÿæˆå¯¹è±¡

		fb.setCommand(command); //å°†å‘½ä»¤å¯¹è±¡æ³¨å…¥åŠŸèƒ½é”®
		fb.click(); //è°ƒç”¨åŠŸèƒ½é”®çš„ä¸šåŠ¡æ–¹æ³•
	}
}
```

## çµ„åˆæ¨¡å¼

### ä»‹ç´¹

ç»„åˆæ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œç”¨äºå°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤º"éƒ¨åˆ†-æ•´ä½“"çš„å±‚æ¬¡å…³ç³»ï¼Œä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚

### çµæ§‹

![image-20230531172221176](https://oooooo.oss-cn-fuzhou.aliyuncs.com/img/image-20230531172221176.png)

### è§’è‰²

- ç»„ä»¶ï¼ˆComponentï¼‰ï¼šæ˜¯ç»„åˆä¸­çš„æŠ½è±¡åŸºç±»ï¼Œå®šä¹‰äº†ç»„åˆå¯¹è±¡å’Œå¶å­å¯¹è±¡çš„å…±æœ‰æ“ä½œæ¥å£ã€‚å®ƒå¯ä»¥æ˜¯æŠ½è±¡ç±»æˆ–æ¥å£ï¼Œå£°æ˜äº†ä¸€äº›ç”¨äºç®¡ç†å­å¯¹è±¡çš„æ–¹æ³•ï¼Œä¾‹å¦‚æ·»åŠ ã€åˆ é™¤ã€è·å–å­å¯¹è±¡ç­‰ã€‚
- å¶å­ï¼ˆLeafï¼‰ï¼šæ˜¯ç»„åˆä¸­çš„å¶å­èŠ‚ç‚¹ï¼Œè¡¨ç¤ºç»„åˆå¯¹è±¡ä¸­çš„åŸºæœ¬å…ƒç´ ï¼Œå®ƒæ²¡æœ‰å­å¯¹è±¡ã€‚
- å®¹å™¨ï¼ˆCompositeï¼‰ï¼šæ˜¯ç»„åˆä¸­çš„å®¹å™¨èŠ‚ç‚¹ï¼Œè¡¨ç¤ºå¯ä»¥åŒ…å«å­å¯¹è±¡çš„å¤æ‚å¯¹è±¡ã€‚å®¹å™¨å¯¹è±¡ä¸­é€šå¸¸ä¼šæŒæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå­å¯¹è±¡ï¼Œå¹¶å®ç°ç»„åˆå¯¹è±¡çš„å…±æœ‰æ“ä½œæ¥å£ã€‚å®¹å™¨å¯¹è±¡çš„æ“ä½œä¼šé€’å½’åœ°è°ƒç”¨å­å¯¹è±¡çš„æ“ä½œï¼Œä»¥å®ç°å¯¹æ•´ä¸ªæ ‘å½¢ç»“æ„çš„æ“ä½œã€‚
- å®¢æˆ·ç«¯ï¼ˆClientï¼‰ï¼šé€šè¿‡ç»„åˆå¯¹è±¡çš„æ“ä½œæ¥å£æ¥æ“ä½œç»„åˆå¯¹è±¡å’Œå¶å­å¯¹è±¡ã€‚

### å¯¦ç¾

```java
//çµ„ä»¶
public abstract class AbstractFile {
	public abstract void add(AbstractFile file);
	public abstract void remove(AbstractFile file);
	public abstract AbstractFile getChild(int i);
	public abstract void killVirus();
}
```

```java
//å®¹å™¨
public class Folder extends AbstractFile {
	//å®šä¹‰é›†åˆfileListï¼Œç”¨äºå­˜å‚¨AbstractFileç±»å‹çš„æˆå‘˜
	private ArrayList<AbstractFile> fileList=new ArrayList<AbstractFile>();
	private String name;

	public Folder(String name) {
		this.name = name;
	}

	public void add(AbstractFile file) {
	   fileList.add(file);
	}

	public void remove(AbstractFile file) {
		fileList.remove(file);
	}

	public AbstractFile getChild(int i) {
		return (AbstractFile)fileList.get(i);
	}

	public void killVirus() {
		System.out.println("****å¯¹æ–‡ä»¶å¤¹'" + name + "'è¿›è¡Œæ€æ¯’");  //æ¨¡æ‹Ÿæ€æ¯’

		//é€’å½’è°ƒç”¨æˆå‘˜æ„ä»¶çš„killVirus()æ–¹æ³•
		for(Object obj : fileList) {
			((AbstractFile)obj).killVirus();
		}
	}

```

```java
//è‘‰å­

//ImageFile
public class ImageFile extends AbstractFile {
	private String name;

	public ImageFile(String name) {
		this.name = name;
	}

	public void add(AbstractFile file) {
	   System.out.println("å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼");
	}

	public void remove(AbstractFile file) {
		System.out.println("å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼");
	}

	public AbstractFile getChild(int i) {
		System.out.println("å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼");
		return null;
	}

	public void killVirus() {
		//æ¨¡æ‹Ÿæ€æ¯’
		System.out.println("----å¯¹å›¾åƒæ–‡ä»¶'" + name + "'è¿›è¡Œæ€æ¯’");
	}
}


//TextFile
public class TextFile extends AbstractFile {
	private String name;

	public TextFile(String name) {
		this.name = name;
	}

	public void add(AbstractFile file) {
	   System.out.println("å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼");
	}

	public void remove(AbstractFile file) {
		System.out.println("å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼");
	}

	public AbstractFile getChild(int i) {
		System.out.println("å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼");
		return null;
	}

	public void killVirus() {
		//æ¨¡æ‹Ÿæ€æ¯’
		System.out.println("----å¯¹æ–‡æœ¬æ–‡ä»¶'" + name + "'è¿›è¡Œæ€æ¯’");
	}
}

//VideoFile
public class VideoFile extends AbstractFile {
	private String name;

	public VideoFile(String name) {
		this.name = name;
	}

	public void add(AbstractFile file) {
	   System.out.println("å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼");
	}

	public void remove(AbstractFile file) {
		System.out.println("å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼");
	}

	public AbstractFile getChild(int i) {
		System.out.println("å¯¹ä¸èµ·ï¼Œä¸æ”¯æŒè¯¥æ–¹æ³•ï¼");
		return null;
	}

	public void killVirus() {
		//æ¨¡æ‹Ÿæ€æ¯’
		System.out.println("----å¯¹è§†é¢‘æ–‡ä»¶'" + name + "'è¿›è¡Œæ€æ¯’");
	}
}
```

```java
//å®¢æˆ¶ç«¯
public class Client {
	public static void main(String args[]) {
        //é’ˆå¯¹æŠ½è±¡æ„ä»¶ç¼–ç¨‹
		AbstractFile file1,file2,file3,file4,file5,folder1,folder2,folder3,folder4;

		folder1 = new Folder("Sunnyçš„èµ„æ–™");
		folder2 = new Folder("å›¾åƒæ–‡ä»¶");
		folder3 = new Folder("æ–‡æœ¬æ–‡ä»¶");
		folder4 = new Folder("è§†é¢‘æ–‡ä»¶");

		file1 = new ImageFile("å°é¾™å¥³.jpg");
		file2 = new ImageFile("å¼ æ— å¿Œ.gif");
		file3 = new TextFile("ä¹é˜´çœŸç».txt");
		file4 = new TextFile("è‘µèŠ±å®å…¸.doc");
		file5 = new VideoFile("ç¬‘å‚²æ±Ÿæ¹–.rmvb");

		folder2.add(file1);
		folder2.add(file2);
		folder3.add(file3);
		folder3.add(file4);
		folder4.add(file5);

		folder1.add(folder2);
		folder1.add(folder3);
		folder1.add(folder4);

        //ä»â€œSunnyçš„èµ„æ–™â€ç»“ç‚¹å¼€å§‹è¿›è¡Œæ€æ¯’æ“ä½œ
		folder1.killVirus();
	}
}
```

## æ¨¡å¼ï¼ˆæ¨¡æ¿ï¼‰

### ä»‹ç´¹

### çµæ§‹

### è§’è‰²

### å¯¦ç¾
